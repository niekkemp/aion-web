---
import SectionContainer from "./SectionContainer.astro";
import SectionHeadingCentered from "./SectionHeadingCentered.astro";
import CardCircled from "./CardCircled.astro";

const { challenge, solution, value, theme = "bw" } = Astro.props;

const themes = {
    blue: "bg-blue-100",
    green: "bg-green-100",
    red: "bg-red-100",
    bw: "bg-gray", // fallback for black/white theme
};

const lineColor = themes[theme] ?? themes.bw;
---

<SectionContainer bg="true">
    <SectionHeadingCentered
        header="Key Insights"
        subText="Understanding the challenges, our solutions, and the value we deliver."
        theme={theme}
    />

    <!-- Flow Wrapper -->
    <div
        class="relative grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8 items-stretch"
    >
        <!-- Horizontal Connector Line (Desktop) -->
        <div
            class={`hidden lg:block absolute top-12 left-[10%] w-[80%] h-0.5 ${lineColor} z-0`}
            aria-hidden="true"
        >
        </div>

        <!-- Vertical Connector Line (Mobile / Tablet) -->
        <div
            class={`lg:hidden absolute top-8 left-1/2 transform -translate-x-1/2 w-0.5 h-[calc(100%-4rem)] ${lineColor}`}
            aria-hidden="true"
        >
        </div>

        <!-- STEP 1: CHALLENGE -->
        <CardCircled header="The Challenge" text={challenge} theme={theme}>
            <span class="font-bold text-lg">1</span>
        </CardCircled>

        <!-- STEP 2: SOLUTION -->
        <CardCircled header="Our Solution" text={solution} theme={theme}>
            <span class="font-bold text-lg">2</span>
        </CardCircled>

        <!-- STEP 3: VALUE -->
        <CardCircled header="The Value" text={value} theme={theme}>
            <span class="font-bold text-lg">3</span>
        </CardCircled>
    </div>
</SectionContainer>
